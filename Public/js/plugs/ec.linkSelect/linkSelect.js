ol.pkg("ec.linkSelect");(function(){var b;var a;var c=function(){b=ol.linkSelect.data;a=function(g,e,f){var d=b[g]?b[g]:false;if(f&&ol.util.isFunction(f)){f(d)}}};if(ol.linkSelect.data){c()}else{setTimeout(c,200)}ol.linkSelect.regionFn=function(h,f){var i=jQuery,d=[],n=i.extend(true,{},ol.linkSelect.region.setting,f),e=i(h),g,m,k=function(p,t){var s;var r=["<select "],q;if(n.ids&&p<n.ids.length&&(q=n.ids[p])){r.push('id="'+q+'"')}if(n.names&&p<n.names.length&&(q=n.names[p])){r.push('name="'+q+'"')}if(n.css&&p<n.css.length&&(q=n.css[p])){r.push('class="'+q+'"')}r.push(" />");var o=i(r.join(""));r=[];if(n.tips&&p<n.tips.length){r.push('<option value="">'+n.tips[p]+"</option>")}for(key in t){r.push('<option value="'+key+'">'+t[key]+"</option>")}o.html(r.join("")).change(function(){var u="0,"+((p>0)?m[0].val()+",":"")+i(this).val();l(p,u)});if(d.length>0){o.val(d[0]);d.splice(0,1)}return o},l=function(o,q){if(o>1){return}var p=o+1;while(p<m.length){m[p].remove();m.splice(p,1)}a(q,true,function(s){if(!s){if(n.onchange){n.onchange.call(m[o][0],q)}return}o=o+1;var r=k(o,s);m.push(r);g.append(r);r.change()})},j=function(p){if(!p){return false}var o;for(key in b){o=b[key];for(id in o){if(p==id){d=key.split(",");d.push(""+p);d.splice(0,1);return}}}};this.init=function(){m=[];g=i("<span class='iss_linkSelect iss_linkSelect_region' />");a(0,true,function(q){var p=[],r,s,o;j(n.defaultValue);o=k(0,q);m.push(o);g.append(o);m[m.length-1].change();e.empty().append(g)})};this.reset=function(){var o=this;setTimeout(function(){o.init()},100)};this.setValue=function(o){n.defaultValue=o;this.init()};this.init()};if(ol.linkSelect.data){ol.linkSelect.region=ol.linkSelect.regionFn}else{ol.linkSelect.region=function(d,e){setTimeout(function(){ol.linkSelect.regionFn(d,e)},200)}}})();ol.linkSelect.regionFn.setting={defaultValue:0,css:null,ids:null,names:null,tips:null,onchange:null};
